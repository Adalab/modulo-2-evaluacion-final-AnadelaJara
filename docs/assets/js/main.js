"use strict";const resultSeries=document.querySelector(".js_resultSeries"),favSeries=document.querySelector(".js_favSeries"),searchInput=document.querySelector(".js_searchInput"),searchButton=document.querySelector(".js_searchButton"),resetButton=document.querySelector(".js_resetButton"),defaultImg="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let allSeries=[],favorites=[];function getApiData(){let e=searchInput.value;fetch("https://api.jikan.moe/v3/search/anime?q="+e).then(e=>e.json()).then(e=>{allSeries=e.results,getPrintAllSeries()})}function printHtmlSeries(e){let t="";t=void 0===favorites.find(t=>t.mal_id===e.mal_id)?"":"fav_style",null===allSeries.image_url?resultSeries.innerHTML+=`<li class="js_add_favorites item_main ${t}" data-id="${e.mal_id}">\n    <img class="img_main" src="${defaultImg}" alt="Serie:${e.title}"/>\n    <p class="title">${e.title}</p>\n    </li>`:resultSeries.innerHTML+=`<li class="js_add_favorites item_main ${t}" data-id="${e.mal_id}">\n    <img class="img_main" src="${e.image_url}" alt="Serie:${e.title}"/>\n    <p class="title">${e.title}</p>\n    </li>`}function getPrintAllSeries(){resultSeries.innerHTML="";for(const e of allSeries)printHtmlSeries(e);const e=document.querySelectorAll(".js_add_favorites");for(const t of e)t.addEventListener("click",handleAddToFavList)}function handleAddToFavList(e){const t=parseInt(e.currentTarget.dataset.id),a=allSeries.find(e=>e.mal_id===t);void 0===favorites.find(e=>e.mal_id===t)?favorites.push(a):alert("Ya a√±adida a favoritos"),e.currentTarget.classList.add("fav_style"),setFavInLocalStorage(),renderFav()}function renderFav(){favSeries.innerHTML="";for(const e of favorites)renderFavItem(e)}function renderFavItem(e){null===favorites.image_url?favSeries.innerHTML+=`<li>\n    <p>${e.title}</p>\n    <img class="img_fav" src="${defaultImg}" alt="Serie:${e.title}"/>\n    <i class="fas fa-times-circle remove-fav"></li>`:favSeries.innerHTML+=`<li>\n    <p>${e.title}</p>\n    <img class="img_fav" src="${e.image_url}" alt="Serie:${e.title}"/>\n    <i class="fas fa-times-circle remove-fav"></li>`}function handleClickSeries(e){e.preventDefault(),getApiData()}function setFavInLocalStorage(){localStorage.setItem("fav-series",JSON.stringify(favorites))}function getFavFromLocalStorage(){const e=localStorage.getItem("fav-series");favorites=null===e?[]:JSON.parse(e),renderFav()}function handleClickReset(){localStorage.removeItem("fav-series"),location.reload()}getFavFromLocalStorage(),searchButton.addEventListener("click",handleClickSeries),resetButton.addEventListener("click",handleClickReset);